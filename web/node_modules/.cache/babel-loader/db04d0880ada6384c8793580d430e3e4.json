{"ast":null,"code":"var _jsxFileName = \"/home/andre/www/rocketseat/nlw/Happy-Project/web/src/pages/createOrphanage.tsx\";\nimport React, { useState } from \"react\";\nimport { Map, Marker, TileLayer } from 'react-leaflet';\nimport { FiPlus } from \"react-icons/fi\";\nimport '../styles/pages/create-orphanage.css';\nimport mapIcon from '../utils/mapIcon';\nimport SideBar from \"../components/SideBar\";\nimport api from \"../services/api\";\nimport { useHistory } from \"react-router-dom\";\nexport default function CreateOrphanage() {\n  const history = useHistory();\n  const [position, setPosition] = useState({\n    latitude: 0,\n    longitude: 0\n  });\n  const [name, setName] = useState(' ');\n  const [about, setAbout] = useState(' ');\n  const [instructions, setInstructions] = useState(' ');\n  const [opening_hours, setOpeningHours] = useState(' ');\n  const [opening_on_weekends, setOpeningOnWeekends] = useState(true);\n  const [images, setImages] = useState([]);\n  const [previewImages, setPreviewImages] = useState([]);\n\n  function handleMapClick(event) {\n    const {\n      lat,\n      lng\n    } = event.latlng;\n    setPosition({\n      latitude: lat,\n      longitude: lng\n    });\n  }\n\n  function handleSelectImages(event) {\n    if (!event.target.files) {\n      return;\n    }\n\n    const selectedImages = Array.from(event.target.files);\n    setImages(selectedImages);\n    const selectedImagesPreview = images.map(image => {\n      return URL.createObjectURL(image);\n    });\n    setPreviewImages(selectedImagesPreview);\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    const {\n      latitude,\n      longitude\n    } = position;\n    const data = new FormData();\n    data.append('name', name);\n    data.append('about', about);\n    data.append('latitude', String(latitude));\n    data.append('longitude', String(longitude));\n    data.append('instructions', instructions);\n    data.append('opening_hours', opening_hours);\n    data.append('opening_on_weekends', String(opening_on_weekends));\n    images.forEach(image => {\n      data.append('images', image);\n    });\n    console.log({\n      position,\n      name,\n      about,\n      instructions,\n      opening_hours,\n      images\n    });\n    await api.post('orphanages', data);\n    alert('cadastro realizado com sucesso');\n    history.push('/app');\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"page-create-orphanage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SideBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"create-orphanage-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"legend\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, \"Dados\"), /*#__PURE__*/React.createElement(Map, {\n    center: [-4.9715909, -39.0248505],\n    style: {\n      width: '100%',\n      height: 280\n    },\n    zoom: 15,\n    onclick: handleMapClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TileLayer, {\n    url: \"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }), position.latitude != 0 && /*#__PURE__*/React.createElement(Marker, {\n    interactive: false,\n    icon: mapIcon,\n    position: [position.latitude, position.longitude],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 18\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, \"Nome do Orfanato\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    value: name,\n    onChange: event => setName(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"about\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, \"Sobre \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 44\n    }\n  }, \"M\\xE1ximo de 300 caracteres\")), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"name\",\n    maxLength: 300,\n    value: about,\n    onChange: event => setAbout(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, \"Fotos\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"images-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, selectedImagesPreview.map(image => {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      key: image,\n      src: image,\n      alt: \" \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 23\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image[]\",\n    className: \"new-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FiPlus, {\n    size: 24,\n    color: \"#15b6d6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    multiple: true,\n    onChange: handleSelectImages,\n    type: \"file\",\n    id: \"image[]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"legend\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, \"Visita\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, \"Instru\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"instructions\",\n    value: instructions,\n    onChange: event => setInstructions(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"opening_hours\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, \"Horario de Funcionamento\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"opening_hours\",\n    value: opening_hours,\n    onChange: event => setOpeningHours(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"open_on_weekends\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }, \"Atende fim de semana\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-select\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: opening_on_weekends ? 'active' : ' ',\n    onClick: () => setOpeningOnWeekends(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }, \"Sim\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: !opening_on_weekends ? 'active' : ' ',\n    onClick: () => setOpeningOnWeekends(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, \"N\\xE3o\")))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"confirm-button\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, \"Confirmar\"))));\n} // return `https://a.tile.openstreetmap.org/${z}/${x}/${y}.png`;","map":{"version":3,"sources":["/home/andre/www/rocketseat/nlw/Happy-Project/web/src/pages/createOrphanage.tsx"],"names":["React","useState","Map","Marker","TileLayer","FiPlus","mapIcon","SideBar","api","useHistory","CreateOrphanage","history","position","setPosition","latitude","longitude","name","setName","about","setAbout","instructions","setInstructions","opening_hours","setOpeningHours","opening_on_weekends","setOpeningOnWeekends","images","setImages","previewImages","setPreviewImages","handleMapClick","event","lat","lng","latlng","handleSelectImages","target","files","selectedImages","Array","from","selectedImagesPreview","map","image","URL","createObjectURL","handleSubmit","preventDefault","data","FormData","append","String","forEach","console","log","post","alert","push","width","height","value"],"mappings":"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","sourcesContent":["import React, { useState, FormEvent, ChangeEvent } from \"react\";\nimport { Map, Marker, TileLayer } from 'react-leaflet';\n\nimport {LeafletMouseEvent} from 'leaflet';\n\nimport { FiPlus } from \"react-icons/fi\";\n\n\n\nimport '../styles/pages/create-orphanage.css';\n\nimport mapIcon from '../utils/mapIcon';\nimport imageDefault from '../utils/images/1.jpg';\n\nimport SideBar from \"../components/SideBar\";\nimport api from \"../services/api\";\nimport { useHistory } from \"react-router-dom\";\n\n\n\nexport default function CreateOrphanage() {\n  const history= useHistory();\n  const [position, setPosition] = useState({latitude: 0, longitude:0});\n  const [name, setName] = useState(' ');\n  const [about, setAbout] = useState(' ');\n  const [instructions, setInstructions] = useState(' ');\n  const [opening_hours, setOpeningHours] = useState(' ');\n  const [opening_on_weekends,setOpeningOnWeekends] = useState(true);\n  const [images, setImages] = useState<File[]>([]);\n  const [previewImages, setPreviewImages] = useState<string[]>([]);\n\n  \n  function handleMapClick(event:LeafletMouseEvent){\n    const {lat, lng} = event.latlng;\n    setPosition({\n      latitude:lat,\n      longitude:lng\n    });\n  }\n  function handleSelectImages(event: ChangeEvent<HTMLInputElement>){\n    if(!event.target.files){\n\n        return ;\n    }\n    const selectedImages = Array.from(event.target.files);\n    setImages(selectedImages);\n\n    const selectedImagesPreview = images.map(image =>{\n      return URL.createObjectURL(image);\n    });\n    setPreviewImages(selectedImagesPreview);\n\n  }\n\n  async function handleSubmit(event: FormEvent){\n    event.preventDefault();\n    const {latitude, longitude}= position;\n\n    const data = new FormData();\n\n    data.append('name',name);\n    data.append('about',about);\n    data.append('latitude',String(latitude));\n    data.append('longitude',String(longitude));\n    data.append('instructions',instructions);\n    data.append('opening_hours',opening_hours);\n    data.append('opening_on_weekends',String(opening_on_weekends));\n\n    images.forEach(image =>{\n      data.append('images',image);\n    });\n    console.log({\n      position,\n      name,\n      about,\n      instructions,\n      opening_hours,\n      images\n\n    })\n\n   await api.post('orphanages',data);\n   alert('cadastro realizado com sucesso');\n   history.push('/app');\n  }\n  return (\n    <div id=\"page-create-orphanage\">\n      <SideBar/>\n      <main>\n        <form onSubmit={handleSubmit} className=\"create-orphanage-form\">\n          <fieldset>\n            <legend>Dados</legend>\n\n            <Map \n              center={[-4.9715909,-39.0248505]} \n              style={{ width: '100%', height: 280 }}\n              zoom={15}\n              onclick={handleMapClick }\n            >\n              <TileLayer url=\"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n              {position.latitude != 0 && (\n                 <Marker \n                    interactive ={false} \n                    icon={mapIcon} \n                    position={[\n                      position.latitude,\n                      position.longitude\n                  ]} \n               />\n              )} \n             \n            </Map>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"name\">Nome do Orfanato</label>\n              <input \n                  id=\"name\" \n                  value={name} \n                  onChange={event => setName(event.target.value)} />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"about\">Sobre <span>Máximo de 300 caracteres</span></label>\n              <textarea \n                  id=\"name\" \n                  maxLength={300} \n                  value={about} \n                  onChange={event => setAbout(event.target.value)}\n                  />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"images\">Fotos</label>\n\n              <div className=\"images-container\">\n                {selectedImagesPreview.map(image =>{\n                    return(\n                      <img key={image} src={image} alt=\" \"/>\n                    );\n                })}\n                <label htmlFor=\"image[]\" className=\"new-image\">\n                  <FiPlus size={24} color=\"#15b6d6\" />\n                </label>\n               \n              </div>\n\n              <input multiple onChange={handleSelectImages} type=\"file\" id=\"image[]\"/>\n            </div>\n          </fieldset>\n\n          <fieldset>\n            <legend>Visitação</legend>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"instructions\">Instruções</label>\n              <textarea \n                id=\"instructions\" \n                value={instructions} \n                  onChange={event => setInstructions(event.target.value)}\n                />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"opening_hours\">Horario de Funcionamento</label>\n              <input \n                id=\"opening_hours\"\n                value={opening_hours} \n                  onChange={event => setOpeningHours(event.target.value)}\n                />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"open_on_weekends\">Atende fim de semana</label>\n\n              <div className=\"button-select\">\n                <button \n                      type=\"button\" \n                      className={opening_on_weekends ? 'active' : ' '}\n                      onClick={() => setOpeningOnWeekends(true)}\n                    >\n                      Sim\n                </button>\n\n                <button \n                      type=\"button\"\n                      className={!opening_on_weekends ? 'active' : ' '}\n                      onClick={() => setOpeningOnWeekends(false)}\n                    >\n                      Não\n                </button>\n              </div>\n            </div>\n          </fieldset>\n\n          <button className=\"confirm-button\" type=\"submit\">\n            Confirmar\n          </button>\n        </form>\n      </main>\n    </div>\n  );\n}\n\n// return `https://a.tile.openstreetmap.org/${z}/${x}/${y}.png`;\n"]},"metadata":{},"sourceType":"module"}